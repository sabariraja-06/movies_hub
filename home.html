<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- Replace your current viewport meta tag with this -->
    <meta name="viewport"
        content="width=1200, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stremox</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* CSS Styles */
        :root {
            --primary: #2c3e50;
            --secondary: #34495e;
            --accent: #e74c3c;
            --light: #f3f3f3;
            --dark: #2c3e50;
            --success: #27ae60;
            --gradient-1: #3498db;
            --gradient-2: #9b59b6;
            --gradient-3: #e74c3c;
            --text-light: #ecf0f1;
            --text-dark: #2c3e50;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', 'Lato', sans-serif;
        }

        body {
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Add this to your existing CSS */
        body {
            min-width: 1200px;
            overflow-x: auto;
        }

        .container {
            min-width: 1200px;
        }

        /* Disable responsive styles */
        @media (max-width: 1024px) {
            .products {
                grid-template-columns: repeat(3, 1fr) !important;
                /* Force 3 columns */
            }

            .nav-links {
                gap: 40px !important;
                /* Keep original gap */
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: row !important;
                /* Keep horizontal layout */
                padding: 20px 20px !important;
            }

            .nav-container {
                flex-direction: row !important;
                margin-top: 0 !important;
            }

            .logo {
                margin-right: 40px !important;
                margin-bottom: 0 !important;
            }

            .nav-links {
                width: auto !important;
                justify-content: center !important;
                margin-bottom: 0 !important;
                gap: 40px !important;
            }

            .icons {
                margin-left: 40px !important;
            }

            .products {
                grid-template-columns: repeat(3, 1fr) !important;
                /* Force 3 columns */
            }

            .product-image {
                height: 250px !important;
                /* Keep original height */
            }

            .section-title {
                font-size: 32px !important;
                /* Keep original size */
            }
        }

        .payment-page-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .payment-page-content {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .close-payment-page {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .close-payment-page:hover {
            color: var(--accent);
            transform: rotate(90deg);
        }

        /* Particle Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        header {
            background-color: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 20px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 10;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            margin-right: 40px;
            background: linear-gradient(to right, #e74c3c, #f39c12);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 8px rgba(231, 76, 60, 0.3);
            letter-spacing: 1px;
            font-family: 'Montserrat', sans-serif;
        }

        .nav-container {
            display: flex;
            flex: 1;
            justify-content: space-between;
            align-items: center;
        }

        .nav-links {
            display: flex;
            flex: 1;
            justify-content: center;
            gap: 40px;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            padding: 8px 12px;
            transition: all 0.3s ease;
            position: relative;
            font-family: 'Lato', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--accent);
            transition: width 0.3s ease;
        }

        /* Cart Modal */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .cart-modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .close-cart {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .close-cart:hover {
            color: var(--accent);
            transform: scale(1.1);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-weight: bold;
            font-size: 18px;
        }

        .checkout-btn {
            margin-top: 20px;
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, var(--accent), #f39c12);
            border: none;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: linear-gradient(to right, #f39c12, var(--accent));
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
        }

        .nav-links a:hover {
            color: var(--accent);
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.7);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .icons {
            display: flex;
            gap: 25px;
            margin-left: 40px;
        }

        .cart-icon,
        .wishlist-icon {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            color: var(--text-light);
        }

        .cart-icon:hover,
        .wishlist-icon:hover {
            transform: scale(1.1);
            color: var(--accent);
        }

        .cart-count,
        .wishlist-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: var(--accent);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.7);
        }

        .search-bar {
            display: flex;
            margin: 20px auto;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            z-index: 5;
        }

        .search-bar input {
            flex: 1;
            padding: 12px;
            border: none;
            outline: none;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            font-family: 'Lato', sans-serif;
        }

        .search-bar input:focus {
            background-color: white;
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
        }

        .search-bar button {
            padding: 12px 20px;
            background: linear-gradient(to right, var(--accent), #f39c12);
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 0.5px;
        }

        .search-bar button:hover {
            background: linear-gradient(to right, #f39c12, var(--accent));
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
        }

        .container {
            padding: 20px;
            max-width: 1200px;
            margin: 30px auto;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 5;
        }

        .products {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 30px;
        }

        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--gradient-1), var(--gradient-2), var(--gradient-3));
        }

        .product-image {
            height: 250px;
            overflow: hidden;
            position: relative;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .wishlist-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 2;
            color: #ccc;
        }

        .wishlist-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
        }

        .wishlist-btn.active {
            color: var(--accent);
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
        }

        .product-info {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .product-title {
            font-size: 16px;
            margin-bottom: 10px;
            min-height: 40px;
            color: var(--dark);
            font-weight: 600;
        }

        .product-price {
            font-weight: bold;
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 10px;
            font-family: 'Montserrat', sans-serif;
        }

        .product-rating {
            color: #f1c40f;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .add-to-cart {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, var(--accent), #f39c12);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            margin-top: auto;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Montserrat', sans-serif;
        }

        .add-to-cart:hover {
            background: linear-gradient(to right, #f39c12, var(--accent));
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
            transform: translateY(-2px);
        }

        .section-title {
            text-align: center;
            margin: 30px 0;
            font-size: 32px;
            color: var(--primary);
            position: relative;
            padding-bottom: 15px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(to right, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            border-radius: 3px;
        }

        #payment-page {
            display: none;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            margin: 30px auto;
            position: relative;
            z-index: 5;
        }

        #payment-form input {
            transition: all 0.3s ease;
            border: 1px solid #ddd !important;
            font-family: 'Lato', sans-serif;
        }

        #payment-form input:focus {
            border-color: var(--accent) !important;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        #back-to-shop {
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        #back-to-shop:hover {
            background-color: var(--accent) !important;
            color: white !important;
        }

        /* Featured Product Banner */
        .featured-banner {
            position: absolute;
            top: 20px;
            left: -30px;
            background: linear-gradient(45deg, var(--gradient-1), var(--gradient-3));
            color: white;
            padding: 8px 30px;
            transform: rotate(-45deg);
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        /* Product Badges */
        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: var(--success);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            z-index: 2;
        }

        .price {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }

        .price::before {
            content: '₹';
            margin-right: 2px;
        }

        /* QR Scanner Styles */
        .qr-scanner-container {
            text-align: center;
            margin: 30px 0;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background-color: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .qr-code img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .scan-instructions {
            margin-top: 20px;
            font-size: 18px;
            color: var(--dark);
            font-weight: 500;
        }

        .payment-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .payment-option {
            width: 60px;
            height: 40px;
            object-fit: contain;
            filter: grayscale(30%);
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            filter: grayscale(0%);
            transform: scale(1.1);
        }

        /* About Product Button */
        .about-product {
            width: 100%;
            padding: 8px;
            background-color: var(--secondary);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            margin-top: 10px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
        }

        .about-product:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
        }

        /* Product Details Modal */
        .product-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: var(--accent);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .modal-image {
            width: 100%;
            height: 300px;
            object-fit: contain;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .modal-description {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .modal-features {
            margin-bottom: 15px;
        }

        .modal-features li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 20px;
        }

        .modal-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
        }

        /* Floating particles */
        .particles-js-canvas-el {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Glow effect for featured items */
        .featured-glow {
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
            }

            to {
                box-shadow: 0 0 20px rgba(52, 152, 219, 0.8);
            }
        }

        /* Hover effect for product cards */
        .product-card:hover::before {
            height: 8px;
            background: linear-gradient(to right, #e74c3c, #f39c12);
        }

        /* Responsive styles */
        @media (max-width: 1024px) {
            .products {
                grid-template-columns: repeat(2, 1fr);
            }

            .nav-links {
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 15px;
            }

            .nav-container {
                width: 100%;
                flex-direction: column;
                margin-top: 15px;
            }

            .logo {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .nav-links {
                width: 100%;
                justify-content: space-around;
                margin-bottom: 15px;
                gap: 10px;
            }

            .icons {
                margin-left: 0;
            }

            .products {
                grid-template-columns: 1fr;
            }

            .product-image {
                height: 200px;
            }

            .qr-code {
                width: 150px;
                height: 150px;
            }

            .section-title {
                font-size: 26px;
            }
        }

        /* No results message */
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
        }

        .no-results i {
            font-size: 48px;
            color: #ccc;
            margin-bottom: 20px;
        }

        .no-results h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .no-results p {
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .show-all-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: linear-gradient(to right, var(--accent), #f39c12);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .show-all-btn:hover {
            background: linear-gradient(to right, #f39c12, var(--accent));
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
        }

        /* Alert styles */
        .alert {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: var(--success);
            color: white;
            border-radius: 4px;
            text-align: center;
        }

        /* Payment Steps */
        .payment-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .payment-steps::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #ddd;
            z-index: 1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ddd;
            color: #666;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .step.active .step-number {
            background-color: var(--accent);
            color: white;
        }

        .step.completed .step-number {
            background-color: var(--success);
            color: white;
        }

        .step-label {
            font-size: 14px;
            color: #666;
        }

        .step.active .step-label {
            color: var(--accent);
            font-weight: bold;
        }

        .step.completed .step-label {
            color: var(--success);
        }

        /* Cart Summary */
        .cart-summary {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .cart-summary h3 {
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: bold;
        }

        .remove-item {
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            align-self: center;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            font-weight: bold;
            font-size: 18px;
        }

        /* AI Assistant Styles */
        .ai-assistant-icon {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            color: var(--text-light);
            margin-left: 20px;
        }

        .ai-assistant-icon:hover {
            transform: scale(1.1);
            color: var(--accent);
        }

        .ai-assistant-modal {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-height: 600px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            overflow: hidden;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .ai-assistant-modal.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .ai-modal-content {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .close-ai-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 20px;
            cursor: pointer;
            color: var(--secondary);
            transition: all 0.3s ease;
        }

        .close-ai-modal:hover {
            color: var(--accent);
            transform: rotate(90deg);
        }

        .ai-header {
            padding: 15px;
            background: linear-gradient(to right, var(--gradient-1), var(--gradient-2));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-header h3 {
            margin: 0;
            font-size: 16px;
        }

        .ai-status {
            font-size: 12px;
            background-color: var(--success);
            padding: 3px 8px;
            border-radius: 10px;
        }

        .ai-conversation {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            max-height: 400px;
            background-color: #f9f9f9;
        }

        .ai-message {
            display: flex;
            margin-bottom: 15px;
        }

        .ai-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .ai-text {
            background-color: white;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .user-message .ai-avatar {
            background-color: var(--accent);
        }

        .user-message {
            flex-direction: row-reverse;
        }

        .user-message .ai-text {
            background-color: var(--light);
        }

        .ai-input-container {
            display: flex;
            padding: 10px;
            border-top: 1px solid #eee;
        }

        #ai-user-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        #ai-user-input:focus {
            border-color: var(--accent);
        }

        #ai-send-button,
        #ai-voice-button {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            margin-left: 5px;
            transition: all 0.3s ease;
        }

        #ai-send-button:hover,
        #ai-voice-button:hover {
            color: var(--accent);
            transform: scale(1.1);
        }

        .ai-suggestions {
            padding: 10px;
            border-top: 1px solid #eee;
        }

        .ai-suggestions p {
            margin: 0 0 8px 0;
            font-size: 12px;
            color: var(--secondary);
        }

        .suggestion-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .suggestion-btn {
            background-color: var(--light);
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-btn:hover {
            background-color: var(--primary);
            color: white;
        }

        /* Typing indicator */
        .typing-indicator {
            display: inline-block;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--secondary);
            margin-right: 3px;
            animation: typingAnimation 1.4s infinite both;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {

            0%,
            60%,
            100% {
                transform: translateY(0);
            }

            30% {
                transform: translateY(-5px);
            }
        }

        /* Pulse animation for assistant icon */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .ai-assistant-modal {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-height: 600px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            overflow: hidden;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .ai-assistant-modal.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .quick-action {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            margin: 5px 5px 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .quick-action:hover {
            background-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Add this to your existing CSS */
        body {
            min-width: 1200px;
            overflow-x: auto;
        }

        .container {
            min-width: 1200px;
        }

        /* Disable responsive styles */
        @media (max-width: 1024px) {
            .products {
                grid-template-columns: repeat(3, 1fr) !important;
                /* Force 3 columns */
            }

            .nav-links {
                gap: 40px !important;
                /* Keep original gap */
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: row !important;
                /* Keep horizontal layout */
                padding: 20px 20px !important;
            }

            .nav-container {
                flex-direction: row !important;
                margin-top: 0 !important;
            }

            .logo {
                margin-right: 40px !important;
                margin-bottom: 0 !important;
            }

            .nav-links {
                width: auto !important;
                justify-content: center !important;
                margin-bottom: 0 !important;
                gap: 40px !important;
            }

            .icons {
                margin-left: 40px !important;
            }

            .products {
                grid-template-columns: repeat(3, 1fr) !important;
                /* Force 3 columns */
            }

            .product-image {
                height: 250px !important;
                /* Keep original height */
            }

            .section-title {
                font-size: 32px !important;
                /* Keep original size */
            }
        }

        @media (max-width: 768px) {
            #particles-js {
                display: none;
                /* Disable particles on mobile */
            }

            body {
                background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            }
        }

        .product-modal,
        .ai-assistant-modal,
        .cart-modal {
            will-change: transform, opacity;
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        .alert {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            background-color: var(--accent);
            color: white;
            border-radius: 50px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: none;
            animation: slideDown 0.3s ease-out;
            max-width: 80%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        @keyframes slideDown {
            from {
                top: -50px;
                opacity: 0;
            }

            to {
                top: 100px;
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        .remove-item {
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            padding: 5px;
            margin-left: 10px;
            transition: all 0.3s ease;
            font-size: 16px;
            align-self: center;
        }

        .remove-item:hover {
            color: #c0392b;
            transform: scale(1.1);
        }
    </style>
</head>

<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>

    <!-- Header -->
    <header>
        <div class="logo">Stremox</div>
        <div class="nav-container">
            <div class="nav-links">
                <a href="https://moviehub07.neocities.org/zap/home">Home</a>
                <a href="https://moviehub07.neocities.org/zap/service">Services</a>
                <a href="https://moviehub07.neocities.org/zap/about">About</a>
                <a href="https://moviehub07.neocities.org/zap/contact">Contact</a>
            </div>
            <!-- Cart Modal -->
            <div id="cart-modal" class="cart-modal">
                <div class="cart-modal-content">
                    <span class="close-cart">&times;</span>
                    <h3>Your Cart</h3>
                    <div id="cart-items"></div>
                    <div class="cart-total">
                        <span>Total:</span>
                        <span id="cart-total"></span>
                    </div>
                    <button id="checkout-btn" class="checkout-btn">Checkout</button>
                </div>
            </div>
            <div class="icons">
                <div class="wishlist-icon" id="wishlist-icon">
                    <i class="fas fa-heart"></i>
                    <span class="wishlist-count">0</span>
                </div>
                <div class="cart-icon" id="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
                <div class="ai-assistant-icon" id="ai-assistant-icon">
                    <i class="fas fa-robot"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Search Bar -->
    <div class="search-bar">
        <input type="text" placeholder="Search for products..." id="search-input">
        <button id="search-button">Search</button>
    </div>

    <!-- Main Content -->
    <div class="container">
        <h2 class="section-title">Featured Products</h2>
        <!-- Products Grid -->
        <div class="products" id="products">
            <!-- Products will be added dynamically with JavaScript -->
        </div>
    </div>

    <!-- Payment Page (hidden by default) -->
    <div class="payment-page-container" id="payment-page-container">
        <span class="close-payment-page" id="close-payment-page">&times;</span>
        <div class="payment-page-content">
            <h2 class="section-title">Checkout</h2>

            <!-- Payment Steps -->
            <div class="payment-steps">
                <div class="step active" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-label">Your Details</div>
                </div>
                <div class="step" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-label">Payment</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-label">Complete</div>
                </div>
            </div>

            <!-- Cart Summary -->
            <div class="cart-summary">
                <h3>Order Summary</h3>
                <div id="payment-items"></div>
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="payment-total"></span>
                </div>
            </div>

            <!-- Step 1: User Details Form -->
            <div id="user-details-form">
                <h3 style="margin-bottom: 15px;">Enter Your Details</h3>
                <form id="contactForm" style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="position: relative;">
                        <input type="text" id="name" placeholder="Full Name" required
                            style="width: 100%; padding: 12px; border-radius: 4px; border: 1px solid #ddd; font-size: 16px;">
                    </div>
                    <div style="position: relative;">
                        <input type="email" id="emailid" placeholder="Email Address" required
                            style="width: 100%; padding: 12px; border-radius: 4px; border: 1px solid #ddd; font-size: 16px;">
                    </div>
                    <div style="position: relative;">
                        <input type="tel" id="mobile" placeholder="Mobile Number" pattern="[0-9]{10}" required
                            style="width: 100%; padding: 12px; border-radius: 4px; border: 1px solid #ddd; font-size: 16px;">
                        <small style="color: #666; margin-top: 5px; display: block;">Enter 10-digit mobile
                            number</small>
                    </div>
                    <button type="submit"
                        style="padding: 12px; margin-top: 10px; background: linear-gradient(to right, var(--accent), #f39c12); border: none; border-radius: 4px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px;">
                        Continue to Payment
                    </button>
                </form>
            </div>

            <!-- Step 2: QR Scanner Section (hidden initially) -->
            <div class="qr-scanner-container" id="qr-payment-section" style="display: none;">
                <div style="background-color: #f9f9f9; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; color: var(--primary);">Customer Information</h4>
                    <p><strong>Name:</strong> <span id="display-name"></span></p>
                    <p><strong>Email:</strong> <span id="display-email"></span></p>
                    <p><strong>Mobile:</strong> <span id="display-mobile"></span></p>
                </div>

                <h3>Scan to Pay</h3>
                <div class="qr-code">
                    <img src="https://moviehub07.neocities.org/zap/images/qr.jpeg" alt="QR Code">
                </div>
                <p class="scan-instructions">Scan the QR code with your UPI app to complete the payment</p>

                <div class="payment-options">
                    <img src="https://moviehub07.neocities.org/zap/images/gp1.jpg" alt="Google Pay"
                        class="payment-option">
                    <img src="https://moviehub07.neocities.org/zap/images/phonepe.jpg" alt="PhonePe"
                        class="payment-option">
                    <img src="https://moviehub07.neocities.org/zap/images/pay.jpg" alt="Paytm" class="payment-option">
                    <img src="https://moviehub07.neocities.org/zap/images/bhim.jpg" alt="BHIM" class="payment-option">
                </div>

                <button id="complete-order"
                    style="padding: 12px; margin-top: 30px; background: linear-gradient(to right, var(--success), #2ecc71); border: none; border-radius: 4px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; width: 100%;">
                    CONTINUE
                </button>
            </div>

            <!-- Step 3: Order Complete (hidden initially) -->
            <div id="order-complete-section" style="display: none; text-align: center;">
                <i class="fas fa-check-circle" style="font-size: 60px; color: var(--success); margin-bottom: 20px;"></i>
                <h3 style="margin-bottom: 15px; color: var(--success);">Order Placed Successfully!</h3>
                <p style="margin-bottom: 20px;">Thank you for your purchase. Your order has been confirmed.</p>
                <p style="margin-bottom: 20px;">An email with your order details has been sent to <span
                        id="confirmation-email" style="font-weight: bold;"></span></p>

                <p style="margin-bottom: 15px; font-weight: bold;">CLICK BELOW TO SHARE YOUR PAYMENT PROOF</p>

                <div style="display: flex; gap: 15px; margin-top: 15px; justify-content: center;">
                    <a href="https://wa.me/qr/NZZP4XRIF2KPI1" target="_blank"
                        style="padding: 12px; background: linear-gradient(to right, #25D366, #128C7E); border: none; border-radius: 4px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-align: center; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>

                    <a href="https://www.instagram.com/zapster_25?igsh=M2M1cG16cGJzOXF3" target="_blank"
                        style="padding: 12px; background: linear-gradient(to right, #833AB4, #E1306C, #F77737); border: none; border-radius: 4px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-align: center; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fab fa-instagram"></i> Instagram
                    </a>
                </div>

                <button id="back-to-shop"
                    style="padding: 12px; margin-top: 30px; background: linear-gradient(to right, var(--accent), #f39c12); border: none; border-radius: 4px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px;">
                    <i class="fas fa-arrow-left"></i> Back to Shopping
                </button>
            </div>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div class="product-modal" id="product-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 class="modal-title" id="modal-title"></h2>
            <img src="" alt="" class="modal-image" id="modal-image">
            <div class="modal-description" id="modal-description"></div>
            <ul class="modal-features" id="modal-features"></ul>
            <div class="product-price" style="font-size: 20px;">Price: <span class="price" id="modal-price"></span>
            </div>
        </div>
    </div>
    <div class="ai-assistant-modal" id="ai-assistant-modal">
        <div class="ai-modal-content">
            <span class="close-ai-modal">&times;</span>
            <div class="ai-header">
                <h3>Stremox AI Assistant</h3>
                <div class="ai-status" id="ai-status">Online</div>
            </div>
            <div class="ai-conversation" id="ai-conversation">
                <div class="ai-message">
                    <div class="ai-avatar">AI</div>
                    <div class="ai-text">Hello! I'm your shopping assistant. How can I help you today?</div>
                </div>
            </div>
            <div class="ai-input-container">
                <input type="text" id="ai-user-input" placeholder="Ask me anything about our products..."
                    autocomplete="off">
                <button id="ai-send-button"><i class="fas fa-paper-plane"></i></button>
                <button id="ai-voice-button"><i class="fas fa-microphone"></i></button>
            </div>
            <div class="ai-suggestions">
                <p>Quick questions:</p>
                <div class="suggestion-buttons">
                    <button class="suggestion-btn">What's popular?</button>
                    <button class="suggestion-btn">Show streaming services</button>
                    <button class="suggestion-btn">Recommend a VPN</button>
                    <button class="suggestion-btn">What's your return policy?</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Particles.js library -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCTHMhFrU9LYfc-B0TG0z1ZrQeHN320o3M",
            authDomain: "zaps-9792c.firebaseapp.com",
            databaseURL: "https://zaps-9792c-default-rtdb.firebaseio.com",
            projectId: "zaps-9792c",
            storageBucket: "zaps-9792c.firebasestorage.app",
            messagingSenderId: "1095672860098",
            appId: "1:1095672860098:web:6678bf635dcf9853815a5b"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Reference your database
        var contactFormDB = firebase.database().ref("orders");

        // JavaScript for the e-commerce functionality
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize particles.js
            particlesJS("particles-js", {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#ffffff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 2,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#ffffff",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 1,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": true,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });

            // Product data
            const products = [
                {
                    id: 1,
                    title: "AMAZON PRIME",
                    price: 79,
                    image: "https://moviehub07.neocities.org/zap/images/Amazon-Prime-video-plans.jpg",
                    rating: 4.5,
                    featured: true,
                    badge: "Bestseller",
                    description: "Amazon Prime Video is a premium streaming service that offers a wide variety of TV shows, movies, and original content.",
                    features: [
                        "6 MONTH PACKAGE",
                        "Access to thousands of movies and TV shows",
                        "Original Amazon Prime content",
                        "Watch on multiple devices",
                        "Download for offline viewing",
                        "4K Ultra HD and HDR support"
                    ]
                },
                {
                    id: 2,
                    title: "NETFLIX",
                    price: 169,
                    image: "https://moviehub07.neocities.org/zap/images/netflix.jpg",
                    rating: 5,
                    badge: "New",
                    description: "Netflix is the leading streaming entertainment service with TV series, documentaries, and feature films across a wide variety of genres.",
                    features: [
                        "1 MONTH PACKAGE",
                        "Unlimited ad-free movies and TV shows",
                        "Download to watch offline",
                        "Watch on any device",
                        "First month free trial",
                        "4K Ultra HD available"
                    ]
                },
                {
                    id: 3,
                    title: "CRUNCHYROLL",
                    price: 59,
                    image: "https://moviehub07.neocities.org/zap/images/cr.jpg",
                    rating: 4,
                    badge: "Sale",
                    description: "Crunchyroll is the world's largest collection of anime and manga, with new shows added shortly after Japan.",
                    features: [
                        "1 MONTH PACKAGE",
                        "Over 1,000 anime titles",
                        "Simulcasts - new episodes right after Japan",
                        "Ad-free HD streaming",
                        "Manga library included",
                        "Watch on multiple devices"
                    ]
                },
                {
                    id: 4,
                    title: "HOTSTAR",
                    price: 49,
                    image: "https://moviehub07.neocities.org/zap/images/hotstar.jpg",
                    rating: 4,
                    featured: true,
                    description: "Disney+ Hotstar is India's largest premium streaming platform with content from Disney, Marvel, Star Wars and more.",
                    features: [
                        "1 MONTH PACKAGE",
                        "Live sports including cricket and football",
                        "Latest movies and TV shows",
                        "Content in multiple Indian languages",
                        "Simultaneous streaming on 2 devices",
                        "Kids profile with parental controls"
                    ]
                },
                {
                    id: 5,
                    title: "YOU TUBE PREMIUM",
                    price: 49,
                    image: "https://moviehub07.neocities.org/zap/images/yt.jpg",
                    rating: 5,
                    badge: "Trending",
                    description: "YouTube Premium gives you ad-free access to YouTube, background play, and downloads for offline viewing.",
                    features: [
                        "1 MONTH PACKAGE",
                        "Ad-free videos on YouTube",
                        "Background play on mobile",
                        "Download videos to watch offline",
                        "Access to YouTube Music Premium",
                        "Original content included"
                    ]
                },
                {
                    id: 6,
                    title: "ZEE5",
                    price: 49,
                    image: "https://moviehub07.neocities.org/zap/images/Zee5-logo.jpg",
                    rating: 4,
                    description: "ZEE5 is an Indian subscription video-on-demand and over-the-top streaming service with content in multiple languages.",
                    features: [
                        "1 MONTH PACKAGE",
                        "100+ live TV channels",
                        "Original web series and movies",
                        "Content in 12 Indian languages",
                        "Kids section with parental controls",
                        "Download and watch offline"
                    ]
                },
                {
                    id: 7,
                    title: "CANVA PREMIUM",
                    price: 149,
                    image: "https://moviehub07.neocities.org/zap/images/canva.jpg",
                    rating: 4,
                    description: "Canva Premium gives you access to professional design tools, millions of premium templates, and advanced features to create stunning visuals.",
                    features: [
                        "1 YEAR PACKAGE",
                        "Access to 100+ million premium stock photos, videos, and graphics",
                        "610,000+ premium templates for all design needs",
                        "Background remover and other advanced editing tools",
                        "100GB cloud storage for your designs",
                        "Create teams and collaborate on designs"
                    ]
                },
                {
                    id: 8,
                    title: "FIGMA PRO",
                    price: 79,
                    image: "https://moviehub07.neocities.org/zap/images/figma.jpg",
                    rating: 4,
                    description: "Figma Pro is a collaborative interface design tool that lets you create, prototype, and collaborate in real-time with your team.",
                    features: [
                        "1 MONTH PACKAGE",
                        "Unlimited projects and file storage",
                        "Advanced prototyping and animation features",
                        "Team libraries for design systems",
                        "Real-time collaboration with team members",
                        "Version history and design handoff tools"
                    ]
                },
                {
                    id: 9,
                    title: "CHATGPT PLUS",
                    price: 99,
                    image: "https://moviehub07.neocities.org/zap/images/cg.jpg",
                    rating: 4,
                    description: "ChatGPT Plus provides enhanced AI capabilities with priority access to new features, faster response times, and availability even during peak times.",
                    features: [
                        "1 MONTH PACKAGE",
                        "General access to ChatGPT even during peak times",
                        "Faster response times for better productivity",
                        "Priority access to new features and improvements",
                        "Advanced data analysis capabilities",
                        "Web browsing and plugin access"
                    ]
                },
                {
                    id: 10,
                    title: "SURFSHARK",
                    price: 69,
                    image: "https://moviehub07.neocities.org/zap/images/surf.jpg",
                    rating: 4,
                    description: "Surfshark VPN provides secure and private internet access with unlimited simultaneous connections, strong encryption, and a strict no-logs policy.",
                    features: [
                        "3 MONTH PACKAGE",
                        "Unlimited simultaneous connections",
                        "Strong AES-256-GCM encryption",
                        "Strict no-logs policy",
                        "CleanWeb ad and malware blocker",
                        "24/7 customer support"
                    ]
                },
                {
                    id: 11,
                    title: "EXPRESS",
                    price: 69,
                    image: "https://moviehub07.neocities.org/zap/images/exp.jpg",
                    rating: 4,
                    description: "ExpressVPN offers lightning-fast speeds, best-in-class encryption, and servers in 94 countries for reliable and secure internet access.",
                    features: [
                        "2 MONTH PACKAGE",
                        "Servers in 94 countries",
                        "TrustedServer technology (RAM-only servers)",
                        "Network Lock kill switch",
                        "Split tunneling feature",
                        "24/7 live chat support"
                    ]
                },
                {
                    id: 12,
                    title: "NORD",
                    price: 69,
                    image: "https://moviehub07.neocities.org/zap/images/nord.jpg",
                    rating: 4,
                    description: "NordVPN provides advanced security features like Double VPN, Onion Over VPN, and CyberSec for comprehensive online protection.",
                    features: [
                        "2 MONTH PACKAGE",
                        "Double VPN encryption",
                        "Onion Over VPN for extra anonymity",
                        "CyberSec ad and malware blocker",
                        "Dedicated IP option",
                        "6 simultaneous connections"
                    ]
                },
                {
                    "id": 13,
                    "title": "Spotify Premium",
                    "price": 59,
                    "image": "https://moviehub07.neocities.org/zap/images/spotify.jpg",
                    "rating": 5,
                    "description": "Spotify Premium gives you ad-free music streaming, offline listening, and high-quality audio for an uninterrupted music experience.",
                    "features": [
                        "2 MONTH PACKAGE",
                        "Ad-free music streaming",
                        "Download songs for offline listening",
                        "High-quality audio (320 kbps)",
                        "Unlimited skips",
                        "Play any song on-demand",
                        "Listen across multiple devices"
                    ]
                }, {
                    "id": 14,
                    "title": "SonyLIV Premium",
                    "price": 49,
                    "image": "https://moviehub07.neocities.org/zap/images/sonyliv.jpg",
                    "rating": 4,
                    "description": "SonyLIV Premium offers access to exclusive Sony content including movies, TV shows, sports and original series without ads.",
                    "features": [
                        "1 MONTH PACKAGE",
                        "Ad-free streaming",
                        "Access to premium Sony content",
                        "Live sports streaming",
                        "Original web series",
                        "HD and 4K quality",
                        "Simultaneous streams on 2 devices"
                    ]
                }
            ];

            // Cart and wishlist data
            let cart = [];
            let wishlist = [];

            // DOM elements
            const productsContainer = document.getElementById('products');
            const cartIcon = document.getElementById('cart-icon');
            const wishlistIcon = document.getElementById('wishlist-icon');
            const cartCount = document.querySelector('.cart-count');
            const wishlistCount = document.querySelector('.wishlist-count');
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const paymentPage = document.getElementById('payment-page');
            const paymentItems = document.getElementById('payment-items');
            const paymentTotal = document.getElementById('payment-total');
            const backToShop = document.getElementById('back-to-shop');
            const productModal = document.getElementById('product-modal');
            const closeModal = document.querySelector('.close-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalImage = document.getElementById('modal-image');
            const modalDescription = document.getElementById('modal-description');
            const modalFeatures = document.getElementById('modal-features');
            const modalPrice = document.getElementById('modal-price');
            const contactForm = document.getElementById('contactForm');
            const qrPaymentSection = document.getElementById('qr-payment-section');
            const userDetailsForm = document.getElementById('user-details-form');
            const orderCompleteSection = document.getElementById('order-complete-section');
            const completeOrderBtn = document.getElementById('complete-order');
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            const step3 = document.getElementById('step3');
            const displayName = document.getElementById('display-name');
            const displayEmail = document.getElementById('display-email');
            const displayMobile = document.getElementById('display-mobile');
            const confirmationEmail = document.getElementById('confirmation-email');

            // Render products
            function renderProducts(productsToRender) {
                productsContainer.innerHTML = '';

                if (productsToRender.length === 0) {
                    productsContainer.innerHTML = `
                        <div class="no-results">
                            <i class="fas fa-search"></i>
                            <h3>No products found</h3>
                            <p>Try adjusting your search or filter to find what you're looking for.</p>
                            <button class="show-all-btn" id="show-all-btn">Show All Products</button>
                        </div>
                    `;

                    document.getElementById('show-all-btn').addEventListener('click', () => {
                        renderProducts(products);
                        searchInput.value = '';
                    });
                    return;
                }

                productsToRender.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    if (product.featured) {
                        productCard.classList.add('featured-glow');
                    }

                    productCard.innerHTML = `
                        ${product.featured ? '<div class="featured-banner">Featured</div>' : ''}
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.title}">
                            <button class="wishlist-btn" data-id="${product.id}">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">${product.title}</h3>
                            <div class="product-price price">${product.price}</div>
                            <div class="product-rating">
                                ${'<i class="fas fa-star"></i>'.repeat(product.rating)}
                                ${'<i class="far fa-star"></i>'.repeat(5 - product.rating)}
                            </div>
                            <button class="about-product" data-id="${product.id}">About Product</button>
                            <button class="add-to-cart" data-id="${product.id}">Add to Cart</button>
                        </div>
                    `;

                    productsContainer.appendChild(productCard);
                });

                // Add event listeners to all "Add to Cart" buttons
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.getAttribute('data-id'));
                        addToCart(productId);
                    });
                });

                // Add event listeners to all wishlist buttons
                document.querySelectorAll('.wishlist-btn').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.getAttribute('data-id'));
                        toggleWishlist(productId);
                    });
                });

                // Add event listeners to all "About Product" buttons
                document.querySelectorAll('.about-product').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.getAttribute('data-id'));
                        showProductDetails(productId);
                    });
                });
            }

            // Add to cart function
            function addToCart(productId) {
                const product = products.find(p => p.id === productId);
                if (!product) return;

                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1
                    });
                }

                updateCartCount();
                showAlert(`${product.title} added to cart!`);
            }

            // Toggle wishlist function
            function toggleWishlist(productId) {
                const product = products.find(p => p.id === productId);
                if (!product) return;

                const wishlistBtn = document.querySelector(`.wishlist-btn[data-id="${productId}"] i`);

                const index = wishlist.indexOf(productId);
                if (index === -1) {
                    wishlist.push(productId);
                    wishlistBtn.classList.add('active');
                    wishlistBtn.style.color = 'var(--accent)';
                    showAlert(`${product.title} added to wishlist!`);
                } else {
                    wishlist.splice(index, 1);
                    wishlistBtn.classList.remove('active');
                    wishlistBtn.style.color = '#ccc';
                }

                updateWishlistCount();
            }

            // Update cart count
            function updateCartCount() {
                const count = cart.reduce((total, item) => total + item.quantity, 0);
                cartCount.textContent = count;
            }

            // Update wishlist count
            function updateWishlistCount() {
                wishlistCount.textContent = wishlist.length;
            }

            // Show alert
            function showAlert(message) {
                const alert = document.createElement('div');
                alert.className = 'alert';
                alert.textContent = message;
                document.body.appendChild(alert);

                // Show with animation
                setTimeout(() => {
                    alert.style.display = 'block';
                }, 10);

                // Hide after delay
                setTimeout(() => {
                    alert.style.animation = 'fadeOut 0.3s ease forwards';
                    setTimeout(() => {
                        alert.remove();
                    }, 300);
                }, 3000);
            }

            // Show product details modal
            function showProductDetails(productId) {
                const product = products.find(p => p.id === productId);
                if (!product) return;

                modalTitle.textContent = product.title;
                modalImage.src = product.image;
                modalDescription.textContent = product.description;
                modalPrice.textContent = product.price;

                // Clear previous features
                modalFeatures.innerHTML = '';

                // Add features
                product.features.forEach(feature => {
                    const li = document.createElement('li');
                    li.textContent = feature;
                    modalFeatures.appendChild(li);
                });

                productModal.style.display = 'flex';
            }

            // Search products
            function searchProducts() {
                const searchTerm = searchInput.value.toLowerCase();
                if (!searchTerm.trim()) {
                    renderProducts(products);
                    return;
                }

                const filteredProducts = products.filter(product =>
                    product.title.toLowerCase().includes(searchTerm) ||
                    product.description.toLowerCase().includes(searchTerm)
                );

                renderProducts(filteredProducts);
            }

            // Initialize the page
            // Initialize the page
            function init() {
                renderProducts(products);
                updateCartCount();
                updateWishlistCount();

                // Check if any products should be in wishlist from previous session
                // (This would typically be saved in localStorage in a real app)
            }

            // Event listeners
            const cartModal = document.getElementById('cart-modal');
            const closeCart = document.querySelector('.close-cart');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            const checkoutBtn = document.getElementById('checkout-btn');

            // Populate cart modal
            function populateCartModal() {
                cartItemsContainer.innerHTML = '';

                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p>Your cart is empty!</p>';
                    cartTotal.textContent = '₹0';
                    return;
                }

                let total = 0;

                // In the cartIcon click event listener where you populate payment items:
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
        <div class="cart-item-info">
            <div class="cart-item-title">${item.title} (x${item.quantity})</div>
        </div>
        <div class="cart-item-price price">${itemTotal}</div>
        <button class="remove-item" data-index="${index}">
            <i class="fas fa-trash"></i>
        </button>
    `;
                    paymentItems.appendChild(cartItem);
                });

                // Add event listeners to remove buttons in payment page
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.getAttribute('data-index'));
                        removeFromCart(index);

                        // Re-populate payment items after removal
                        const paymentItems = document.getElementById('payment-items');
                        paymentItems.innerHTML = '';

                        let newTotal = 0;
                        cart.forEach((item, idx) => {
                            const itemTotal = item.price * item.quantity;
                            newTotal += itemTotal;

                            const cartItem = document.createElement('div');
                            cartItem.className = 'cart-item';
                            cartItem.innerHTML = `
                <div class="cart-item-info">
                    <div class="cart-item-title">${item.title} (x${item.quantity})</div>
                </div>
                <div class="cart-item-price price">${itemTotal}</div>
                <button class="remove-item" data-index="${idx}">
                    <i class="fas fa-trash"></i>
                </button>
            `;
                            paymentItems.appendChild(cartItem);
                        });

                        document.getElementById('payment-total').textContent = `₹${newTotal}`;

                        // Add event listeners again
                        document.querySelectorAll('.remove-item').forEach(btn => {
                            btn.addEventListener('click', function () {
                                const idx = parseInt(this.getAttribute('data-index'));
                                removeFromCart(idx);
                                // You might want to refresh the payment page view here as well
                            });
                        });
                    });
                });

                cartTotal.textContent = `₹${total}`;

                // Add event listeners to remove buttons
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.getAttribute('data-index'));
                        removeFromCart(index);
                    });
                });
            }
            function removeFromCart(index) {
                if (index >= 0 && index < cart.length) {
                    const removedItem = cart[index];
                    cart.splice(index, 1);
                    updateCartCount();
                    populateCartModal();
                    showAlert(`${removedItem.title} removed from cart!`);
                }
            }

            // Toggle cart modal
            cartIcon.addEventListener('click', function () {
                if (cart.length === 0) {
                    showAlert('Your cart is empty!');
                    return;
                }

                // Show payment page container
                const paymentPageContainer = document.getElementById('payment-page-container');
                paymentPageContainer.style.display = 'block';

                // Populate cart items
                const paymentItems = document.getElementById('payment-items');
                paymentItems.innerHTML = '';

                let total = 0;
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
            <div class="cart-item-info">
                <div class="cart-item-title">${item.title} (x${item.quantity})</div>
            </div>
            <div class="cart-item-price price">${itemTotal}</div>
        `;
                    paymentItems.appendChild(cartItem);
                });

                document.getElementById('payment-total').textContent = `₹${total}`;

                // Reset to step 1
                document.getElementById('step1').classList.add('active');
                document.getElementById('step1').classList.remove('completed');
                document.getElementById('step2').classList.remove('active', 'completed');
                document.getElementById('step3').classList.remove('active', 'completed');

                document.getElementById('user-details-form').style.display = 'block';
                document.getElementById('qr-payment-section').style.display = 'none';
                document.getElementById('order-complete-section').style.display = 'none';
            });

            // Close cart modal
            closeCart.addEventListener('click', function () {
                cartModal.style.display = 'none';
            });

            // Close modal on outside click
            window.addEventListener('click', function (e) {
                if (e.target === cartModal) {
                    cartModal.style.display = 'none';
                }
            });

            // Checkout button logic
            checkoutBtn.addEventListener('click', function () {
                populateCartModal();
                cartModal.style.display = 'none';

                // Show payment page container
                const paymentPageContainer = document.getElementById('payment-page-container');
                paymentPageContainer.style.display = 'block';

                // Scroll to payment page
                setTimeout(() => {
                    paymentPageContainer.scrollIntoView({ behavior: 'smooth' });
                }, 10);
            });

            // Add event listener for closing payment page
            document.getElementById('close-payment-page').addEventListener('click', function () {
                document.getElementById('payment-page-container').style.display = 'none';
            });

            wishlistIcon.addEventListener('click', function () {
                if (wishlist.length === 0) {
                    showAlert('Your wishlist is empty!');
                    return;
                }

                const wishlistProducts = products.filter(p => wishlist.includes(p.id));
                renderProducts(wishlistProducts);
                searchInput.value = 'Wishlist Items';

                // Scroll to products
                setTimeout(() => {
                    document.querySelector('.container').scrollIntoView({ behavior: 'smooth' });
                }, 10);
            });

            searchButton.addEventListener('click', searchProducts);
            searchInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    searchProducts();
                }
            });

            closeModal.addEventListener('click', function () {
                productModal.style.display = 'none';
            });

            window.addEventListener('click', function (e) {
                if (e.target === productModal) {
                    productModal.style.display = 'none';
                }
            });

            // Modify the back-to-shop button
            document.getElementById('back-to-shop').addEventListener('click', function () {
                document.getElementById('payment-page-container').style.display = 'none';
                cart = [];
                updateCartCount();

                // Reset payment steps
                document.getElementById('step1').classList.add('active');
                document.getElementById('step1').classList.remove('completed');
                document.getElementById('step2').classList.remove('active', 'completed');
                document.getElementById('step3').classList.remove('active', 'completed');

                // Show user details form and hide others
                document.getElementById('user-details-form').style.display = 'block';
                document.getElementById('qr-payment-section').style.display = 'none';
                document.getElementById('order-complete-section').style.display = 'none';
            });

            // Form submission
            contactForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Get form values
                const name = document.getElementById('name').value;
                const email = document.getElementById('emailid').value;
                const mobile = document.getElementById('mobile').value;

                // Validate form
                if (!name || !email || !mobile) {
                    showAlert('Please fill all fields!');
                    return;
                }

                if (!/^\d{10}$/.test(mobile)) {
                    showAlert('Please enter a valid 10-digit mobile number!');
                    return;
                }

                // Display user details in payment section
                displayName.textContent = name;
                displayEmail.textContent = email;
                displayMobile.textContent = mobile;
                confirmationEmail.textContent = email;

                // Move to next step
                step1.classList.remove('active');
                step1.classList.add('completed');
                step2.classList.add('active');

                // Hide user details form and show payment section
                userDetailsForm.style.display = 'none';
                qrPaymentSection.style.display = 'block';

                // Scroll to top of payment section
                setTimeout(() => {
                    qrPaymentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 10);
            });

            // Complete order button
            completeOrderBtn.addEventListener('click', function () {
                // Get form values
                const name = document.getElementById('name').value;
                const email = document.getElementById('emailid').value;
                const mobile = document.getElementById('mobile').value;

                // Calculate total
                let total = 0;
                const orderItems = [];
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    orderItems.push({
                        product: item.title,
                        quantity: item.quantity,
                        price: item.price
                    });
                });

                // Save order to Firebase
                saveOrder(name, email, mobile, total, orderItems);

                // Move to final step
                step2.classList.remove('active');
                step2.classList.add('completed');
                step3.classList.add('active');

                // Hide payment section and show completion section
                qrPaymentSection.style.display = 'none';
                orderCompleteSection.style.display = 'block';

                // Scroll to top of completion section
                setTimeout(() => {
                    orderCompleteSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 10);
            });

            // Save order to Firebase
            function saveOrder(name, email, mobile, total, items) {
                const newOrderRef = contactFormDB.push();

                newOrderRef.set({
                    name: name,
                    email: email,
                    mobile: mobile,
                    total: total,
                    items: items,
                    timestamp: firebase.database.ServerValue.TIMESTAMP,
                    date: new Date().toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: true
                    })
                }).then(() => {
                    console.log('Order saved successfully with timestamp');
                }).catch((error) => {
                    console.error('Error saving order:', error);
                });
            }

            // Initialize the app
            init();
        });

        // Enhanced AI Assistant functionality

        // Ultra-Enhanced AI Assistant functionality
        document.addEventListener('DOMContentLoaded', function () {
            const aiAssistantIcon = document.getElementById('ai-assistant-icon');
            const aiAssistantModal = document.getElementById('ai-assistant-modal');
            const closeAiModal = document.querySelector('.close-ai-modal');
            const aiConversation = document.getElementById('ai-conversation');
            const aiUserInput = document.getElementById('ai-user-input');
            const aiSendButton = document.getElementById('ai-send-button');
            const aiVoiceButton = document.getElementById('ai-voice-button');
            const suggestionButtons = document.querySelectorAll('.suggestion-btn');

            // Enhanced conversation context tracking
            let conversationContext = {
                lastProductMentioned: null,
                currentTask: null,
                userPreferences: {
                    budget: null,
                    interests: [],
                    usagePattern: null
                },
                conversationHistory: []
            };

            // Toggle AI modal with animation
            aiAssistantIcon.addEventListener('click', function () {
                if (aiAssistantModal.classList.contains('active')) {
                    aiAssistantModal.classList.remove('active');
                    aiAssistantModal.style.opacity = '0';
                    aiAssistantModal.style.transform = 'translateY(20px)';
                } else {
                    aiAssistantModal.classList.add('active');
                    aiAssistantModal.style.opacity = '1';
                    aiAssistantModal.style.transform = 'translateY(0)';
                    aiUserInput.focus();
                }
                aiAssistantIcon.classList.remove('pulse');
            });
            // Close AI modal with animation
            closeAiModal.addEventListener('click', function () {
                aiAssistantModal.classList.remove('active');
                aiAssistantModal.style.opacity = '0';
                aiAssistantModal.style.transform = 'translateY(20px)';
            });

            // Add pulse animation to attract attention
            setTimeout(() => {
                if (!aiAssistantModal.classList.contains('active')) {
                    aiAssistantIcon.classList.add('pulse');
                }
            }, 15000);

            // Function to add message to conversation with animation
            function addMessage(text, isUser = false, isHTML = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `ai-message ${isUser ? 'user-message' : ''}`;
                messageDiv.style.opacity = '0';
                messageDiv.style.transform = isUser ? 'translateX(20px)' : 'translateX(-20px)';
                messageDiv.style.animation = `${isUser ? 'slideInRight' : 'slideInLeft'} 0.3s ease forwards`;

                const avatarDiv = document.createElement('div');
                avatarDiv.className = 'ai-avatar';
                avatarDiv.textContent = isUser ? 'You' : 'AI';

                const textDiv = document.createElement('div');
                textDiv.className = 'ai-text';

                if (isHTML) {
                    textDiv.innerHTML = text;
                } else {
                    // Add basic markdown-like formatting
                    const formattedText = text
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                        .replace(/\*(.*?)\*/g, '<em>$1</em>'); // Italics
                    textDiv.innerHTML = formattedText;
                }

                messageDiv.appendChild(avatarDiv);
                messageDiv.appendChild(textDiv);

                aiConversation.appendChild(messageDiv);
                aiConversation.scrollTop = aiConversation.scrollHeight;

                // Add to conversation history
                conversationContext.conversationHistory.push({
                    text: text,
                    isUser: isUser,
                    timestamp: new Date().toISOString()
                });
            }

            // Function to show typing indicator
            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'ai-message';
                typingDiv.style.opacity = '0';
                typingDiv.style.animation = 'fadeIn 0.3s ease forwards';

                const avatarDiv = document.createElement('div');
                avatarDiv.className = 'ai-avatar';
                avatarDiv.textContent = 'AI';

                const textDiv = document.createElement('div');
                textDiv.className = 'ai-text typing-indicator';
                textDiv.innerHTML = `
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
            `;

                typingDiv.appendChild(avatarDiv);
                typingDiv.appendChild(textDiv);

                aiConversation.appendChild(typingDiv);
                aiConversation.scrollTop = aiConversation.scrollHeight;

                return typingDiv;
            }

            // Ultra-detailed product information database
            const productDetails = {
                // Amazon Prime
                1: {
                    description: "Amazon Prime Video is a premium streaming service offering a vast library of movies, TV shows, and award-winning original content.",
                    features: [
                        "6-month subscription package (best value)",
                        "Access to 20,000+ movies and TV shows",
                        "Prime Originals like The Boys, The Marvelous Mrs. Maisel, and Jack Ryan",
                        "Simultaneous streaming on 3 devices",
                        "Download up to 25 titles for offline viewing",
                        "4K Ultra HD, HDR10+, and Dolby Atmos support",
                        "X-Ray feature for actor and song information",
                        "Free shipping benefits on Amazon.in orders"
                    ],
                    benefits: [
                        "Ad-free streaming experience",
                        "New content added weekly (typically 50+ new titles)",
                        "Access to Prime Music (2 million songs) and Prime Reading (1000+ books)",
                        "Parental controls with PIN protection",
                        "Watch Party feature for synchronized viewing with friends"
                    ],
                    technical: {
                        resolution: "Up to 4K UHD",
                        audio: "Dolby Digital Plus, Dolby Atmos",
                        devices: ["Smart TVs", "Fire TV", "Game Consoles", "iOS/Android", "Web Browsers"],
                        internet: "Minimum 5 Mbps for HD, 25 Mbps for 4K"
                    },
                    limitations: "Some content may have geographic restrictions. Live sports not included.",
                    faq: [
                        "Q: Can I share my account? A: Yes, with up to 2 other household members",
                        "Q: Is there a free trial? A: Yes, 30-day trial available for new users",
                        "Q: How often is content updated? A: New titles added every Tuesday"
                    ]
                },
                // Netflix
                2: {
                    description: "Netflix is the world's leading streaming entertainment service with award-winning series, films, and documentaries.",
                    features: [
                        "1-month premium subscription (4-screen plan)",
                        "Unlimited ad-free access to entire library",
                        "Download on up to 4 mobile devices",
                        "4K Ultra HD with Dolby Vision and Dolby Atmos",
                        "Personalized recommendations based on viewing history",
                        "Kids profile with parental controls",
                        "Interactive content (like Black Mirror: Bandersnatch)"
                    ],
                    popularContent: {
                        originals: ["Stranger Things", "The Crown", "Bridgerton", "The Witcher"],
                        movies: ["Red Notice", "Don't Look Up", "Extraction"],
                        anime: ["Arcane", "Castlevania", "The Way of the Househusband"]
                    },
                    technical: {
                        resolution: "Up to 4K UHD with HDR",
                        audio: "Dolby Atmos, 5.1 surround sound",
                        devices: ["6000+ supported devices including smart TVs and game consoles"],
                        internet: "5 Mbps for HD, 25 Mbps for Ultra HD"
                    },
                    regionalInfo: {
                        india: {
                            price: "₹649/month for Premium",
                            localContent: "100+ Indian titles including Sacred Games and Lust Stories"
                        }
                    }
                },
                // Add similarly detailed info for all other products...
            };

            // Enhanced AI response function with natural language processing
            function getAIResponse(userInput) {
                const input = userInput.toLowerCase();
                conversationContext.conversationHistory.push({ text: userInput, isUser: true });

                // Detect user intent
                const intent = detectIntent(input);

                // Handle greetings
                if (intent === 'greeting') {
                    const greetings = [
                        `Hello there! 👋 I'm Stremox, your personal shopping assistant. I can help you find the perfect digital subscriptions, compare options, and even guide you through purchases. What brings you here today?`,
                        `Hi! I'm Stremox, your AI shopping helper. I know all about our products and can help you choose the best options. How can I assist you?`,
                        `Welcome! 🤖 I'm Stremox, here to make your shopping experience smooth. Need recommendations, product details, or help with a purchase?`
                    ];
                    return greetings[Math.floor(Math.random() * greetings.length)];
                }

                // Handle product-specific queries
                if (intent === 'product_query') {
                    const product = identifyProduct(input);
                    if (product) {
                        conversationContext.lastProductMentioned = product.id;
                        return generateProductResponse(product);
                    }
                }

                // Handle comparisons
                if (intent === 'comparison') {
                    return handleComparisonRequest(input);
                }

                // Handle purchase-related questions
                if (intent === 'purchase') {
                    return handlePurchaseQuestions(input);
                }

                // Handle technical support
                if (intent === 'support') {
                    return handleSupportQuestions(input);
                }

                // Handle recommendations
                if (intent === 'recommendation') {
                    return generateRecommendations(input);
                }

                // Handle account questions
                if (intent === 'account') {
                    return `I can help with account-related questions:\n\n` +
                        `• **Login issues**: Try resetting your password or contact support@stremox.com\n` +
                        `• **Account security**: Enable 2FA in your account settings\n` +
                        `• **Profile management**: Update your details in the 'My Account' section\n\n` +
                        `What specific account issue are you facing?`;
                }

                // Handle payment questions
                if (intent === 'payment') {
                    return `**Payment Options**:\n\n` +
                        `💳 **Credit/Debit Cards**: Visa, Mastercard, Amex, RuPay\n` +
                        `📱 **UPI**: Instant payments via PhonePe, GPay, Paytm\n` +
                        `🏦 **Net Banking**: 50+ supported banks\n` +
                        `💰 **Wallets**: Paytm, Amazon Pay, Mobikwik\n` +
                        `🔒 All transactions are secured with 256-bit SSL encryption\n\n` +
                        `Need help with a specific payment method or having issues?`;
                }

                // Handle refund questions
                if (intent === 'refund') {
                    return `**Our Refund Policy**:\n\n` +
                        `↩️ **7-day money back guarantee** on all digital products\n` +
                        `⏳ Refunds processed within 3-5 business days\n` +
                        `📧 Contact support@stremox.com with your order ID\n` +
                        `❗ Refund eligibility requires product to be unused\n\n` +
                        `Would you like help initiating a refund?`;
                }

                // Handle gift questions
                if (intent === 'gift') {
                    return `**Gifting Digital Subscriptions**:\n\n` +
                        `1. Select your desired product\n` +
                        `2. Click 'Buy as Gift' during checkout\n` +
                        `3. Enter recipient's email and delivery date\n` +
                        `4. Add a personalized message (optional)\n` +
                        `5. Complete payment\n\n` +
                        `🎁 The recipient receives a beautiful e-gift email with redemption instructions\n` +
                        `💝 Perfect for birthdays, anniversaries, or just because!\n\n` +
                        `Need help selecting a gift? I can recommend popular choices.`;
                }

                // Handle thank you responses
                if (intent === 'thanks') {
                    const thanksResponses = [
                        "You're very welcome! 😊 Is there anything else I can help you with?",
                        "Happy to help! 💖 Don't hesitate to ask if you have more questions.",
                        "My pleasure! 🎉 Remember I'm here anytime you need shopping assistance."
                    ];
                    return thanksResponses[Math.floor(Math.random() * thanksResponses.length)];
                }

                // Handle goodbye
                if (intent === 'goodbye') {
                    const goodbyeResponses = [
                        "Goodbye! 👋 Come back anytime you need help with your digital subscriptions.",
                        "Thanks for chatting! 💻 Remember, I'm here 24/7 if you need assistance.",
                        "Have a great day! 🌟 Don't hesitate to return if you have more questions."
                    ];
                    return goodbyeResponses[Math.floor(Math.random() * goodbyeResponses.length)];
                }

                // Fallback with contextual awareness
                if (conversationContext.lastProductMentioned) {
                    const product = products.find(p => p.id === conversationContext.lastProductMentioned);
                    return `I'm not entirely sure what you're asking about ${product.title}. Could you rephrase or ask about:\n\n` +
                        `• Specific features\n` +
                        `• Pricing details\n` +
                        `• How it compares to other products\n` +
                        `• Purchase process`;
                }

                // Final fallback with helpful suggestions
                return `I want to make sure I understand correctly. Could you:\n\n` +
                    `1. Rephrase your question\n` +
                    `2. Ask about specific products\n` +
                    `3. Tell me what you're looking for\n\n` +
                    `For example, you could ask:\n` +
                    `• "What's the difference between Netflix and Amazon Prime?"\n` +
                    `• "Can you recommend a good VPN?"\n` +
                    `• "How do I purchase a subscription as a gift?"`;
            }

            // Intent detection function
            function detectIntent(input) {
                if (/hello|hi|hey|greetings/i.test(input)) return 'greeting';
                if (/prime|netflix|vpn|canva|figma|youtube|hotstar|zee|crunchyroll|subscription|plan|service/i.test(input)) return 'product_query';
                if (/compare|difference|vs|versus|better|which one/i.test(input)) return 'comparison';
                if (/buy|purchase|checkout|order|get|add to cart/i.test(input)) return 'purchase';
                if (/support|help|problem|issue|not working|error/i.test(input)) return 'support';
                if (/recommend|suggest|which should|what's good|best for/i.test(input)) return 'recommendation';
                if (/account|login|sign in|password|profile/i.test(input)) return 'account';
                if (/payment|pay|credit card|debit|upi|wallet|net banking/i.test(input)) return 'payment';
                if (/refund|return|cancel|money back/i.test(input)) return 'refund';
                if (/gift|present|someone else|for friend/i.test(input)) return 'gift';
                if (/thank|thanks|appreciate/i.test(input)) return 'thanks';
                if (/bye|goodbye|see you|later/i.test(input)) return 'goodbye';
                return 'unknown';
            }

            // Product identification function
            function identifyProduct(input) {
                const productMap = {
                    'prime|amazon': 1,
                    'netflix': 2,
                    'crunchyroll|anime': 3,
                    'hotstar|disney': 4,
                    'youtube|yt premium': 5,
                    'zee5': 6,
                    'canva': 7,
                    'figma': 8,
                    'chatgpt|openai': 9,
                    'vpn|surfshark|express|nord': [10, 11, 12]
                };

                for (const [keywords, id] of Object.entries(productMap)) {
                    const regex = new RegExp(keywords, 'i');
                    if (regex.test(input)) {
                        if (Array.isArray(id)) {
                            // Return the highest rated product in this category
                            return products.filter(p => id.includes(p.id))
                                .sort((a, b) => b.rating - a.rating)[0];
                        }
                        return products.find(p => p.id === id);
                    }
                }
                return null;
            }

            // Generate detailed product response
            function generateProductResponse(product) {
                const details = productDetails[product.id] || {};
                let response = `**${product.title}** (₹${product.price}) ★ ${product.rating}/5\n\n`;

                if (details.description) {
                    response += `${details.description}\n\n`;
                }

                // Highlight special offers
                if (product.badge === 'Sale') {
                    response += `🔥 **Special Offer**: This product is currently on sale!\n\n`;
                }

                if (details.features) {
                    response += `**Key Features**:\n`;
                    response += details.features.map(f => `✓ ${f}`).join('\n') + '\n\n';
                }

                if (details.benefits) {
                    response += `**Benefits**:\n`;
                    response += details.benefits.map(b => `• ${b}`).join('\n') + '\n\n';
                }

                // Add technical specifications if available
                if (details.technical) {
                    response += `**Technical Details**:\n`;
                    for (const [key, value] of Object.entries(details.technical)) {
                        response += `▸ ${key.charAt(0).toUpperCase() + key.slice(1)}: ${Array.isArray(value) ? value.join(', ') : value}\n`;
                    }
                    response += '\n';
                }

                // Add quick actions
                response += `**Quick Actions**: \n` +
                    `• <button class="quick-action" data-action="add-to-cart">Add to Cart</button>\n` +
                    `• <button class="quick-action" data-action="details">More Details</button>\n` +
                    `• <button class="quick-action" data-action="compare">Compare</button>\n\n`;

                response += `Would you like to know more about any specific aspect?`;

                return response;
            }

            // Handle comparison requests
            function handleComparisonRequest(input) {
                // Extract product names from input
                const productsToCompare = [];

                // Check if we have a last mentioned product to compare with
                if (conversationContext.lastProductMentioned) {
                    productsToCompare.push(products.find(p => p.id === conversationContext.lastProductMentioned));
                }

                // Look for other products mentioned in the input
                const otherProduct = identifyProduct(input);
                if (otherProduct && (!productsToCompare.length || otherProduct.id !== productsToCompare[0].id)) {
                    productsToCompare.push(otherProduct);
                }

                // If we have exactly 2 products to compare
                if (productsToCompare.length === 2) {
                    return generateComparisonResponse(productsToCompare[0], productsToCompare[1]);
                }

                // If we need to identify more products
                return `I can help compare products. Please specify which products you'd like to compare, for example:\n\n` +
                    `• "Compare Netflix and Amazon Prime"\n` +
                    `• "What's better: Surfshark or ExpressVPN?"\n` +
                    `• "How does Canva compare to Figma?"`;
            }

            // Generate comparison response
            function generateComparisonResponse(product1, product2) {
                const details1 = productDetails[product1.id] || {};
                const details2 = productDetails[product2.id] || {};

                let response = `**Comparison: ${product1.title} vs ${product2.title}**\n\n`;

                // Price comparison
                response += `**Pricing**:\n`;
                response += `▸ ${product1.title}: ₹${product1.price}\n`;
                response += `▸ ${product2.title}: ₹${product2.price}\n\n`;

                // Rating comparison
                response += `**Ratings**:\n`;
                response += `▸ ${product1.title}: ★ ${product1.rating}/5\n`;
                response += `▸ ${product2.title}: ★ ${product2.rating}/5\n\n`;

                // Feature comparison
                response += `**Key Differences**:\n`;

                // Unique features of product 1
                if (details1.features) {
                    const uniqueTo1 = details1.features.filter(f =>
                        !details2.features || !details2.features.some(f2 => f2.includes(f.split(' ')[0]))
                    );
                    if (uniqueTo1.length) {
                        response += `• Only ${product1.title} offers:\n`;
                        response += uniqueTo1.map(f => `   - ${f}`).join('\n') + '\n';
                    }
                }

                // Unique features of product 2
                if (details2.features) {
                    const uniqueTo2 = details2.features.filter(f =>
                        !details1.features || !details1.features.some(f1 => f1.includes(f.split(' ')[0]))
                    );
                    if (uniqueTo2.length) {
                        response += `• Only ${product2.title} offers:\n`;
                        response += uniqueTo2.map(f => `   - ${f}`).join('\n') + '\n';
                    }
                }

                // Recommendation based on common needs
                response += `\n**Recommendation**:\n`;
                if (product1.rating > product2.rating && product1.price <= product2.price) {
                    response += `${product1.title} is generally the better choice with higher rating and competitive pricing.`;
                } else if (product2.rating > product1.rating && product2.price <= product1.price) {
                    response += `${product2.title} is generally the better choice with higher rating and competitive pricing.`;
                } else if (product1.price < product2.price) {
                    response += `${product1.title} offers better value for money, while ${product2.title} has more premium features.`;
                } else {
                    response += `Both have their strengths. ${product1.title} is great for ${details1.features ? details1.features[0].toLowerCase() : 'its features'}, while ${product2.title} excels at ${details2.features ? details2.features[0].toLowerCase() : 'its offerings'}.`;
                }

                return response;
            }

            // Handle purchase-related questions
            function handlePurchaseQuestions(input) {
                if (conversationContext.lastProductMentioned) {
                    const product = products.find(p => p.id === conversationContext.lastProductMentioned);
                    return `**Purchasing ${product.title}**:\n\n` +
                        `1. Click the 'Add to Cart' button below\n` +
                        `2. Review your cart (top right icon)\n` +
                        `3. Proceed to checkout\n` +
                        `4. Enter payment details\n` +
                        `5. Receive instant activation code\n\n` +
                        `💳 Multiple payment options available\n` +
                        `🔒 256-bit SSL secure checkout\n` +
                        `📧 Instant email delivery\n\n` +
                        `<button class="quick-action" data-action="add-to-cart">Add ${product.title} to Cart</button>`;
                }
                return `I can help you purchase any product. First, please tell me which product you're interested in, or browse our collection above.`;
            }

            // Handle support questions
            function handleSupportQuestions(input) {
                if (/not working|error|problem|issue/i.test(input)) {
                    return `I'm sorry you're experiencing issues. Let's troubleshoot:\n\n` +
                        `1. Try refreshing the page or restarting the app\n` +
                        `2. Clear your browser cache/cookies\n` +
                        `3. Check your internet connection\n` +
                        `4. Try a different device if possible\n\n` +
                        `If the problem persists, please contact:\n` +
                        `📧 support@stremox.com\n` +
                        `📞 +91-9876543210 (10AM-7PM IST)\n\n` +
                        `For faster help, include:\n` +
                        `• Screenshot of the issue\n` +
                        `• Device/browser details\n` +
                        `• Steps to reproduce the problem`;
                }
                return `For support, please contact:\n\n` +
                    `📧 support@stremox.com\n` +
                    `📞 +91-9876543210 (10AM-7PM IST)\n\n` +
                    `Our team typically responds within 2 hours during business days.`;
            }

            // Generate personalized recommendations
            function generateRecommendations(input) {
                // Extract user preferences from input
                if (/budget|cheap|affordable|price/i.test(input)) {
                    conversationContext.userPreferences.budget = 'low';
                } else if (/premium|best|high end/i.test(input)) {
                    conversationContext.userPreferences.budget = 'high';
                }

                if (/stream|movie|tv|video/i.test(input)) {
                    conversationContext.userPreferences.interests.push('streaming');
                }

                if (/vpn|privacy|security|geoblock/i.test(input)) {
                    conversationContext.userPreferences.interests.push('vpn');
                }

                if (/design|graphic|template|social media/i.test(input)) {
                    conversationContext.userPreferences.interests.push('design');
                }

                if (/family|kids|children/i.test(input)) {
                    conversationContext.userPreferences.usagePattern = 'family';
                } else if (/business|work|team/i.test(input)) {
                    conversationContext.userPreferences.usagePattern = 'business';
                }

                // Generate recommendations based on preferences
                let filteredProducts = [...products];

                // Filter by budget if specified
                if (conversationContext.userPreferences.budget === 'low') {
                    filteredProducts = filteredProducts.filter(p => p.price < 100);
                } else if (conversationContext.userPreferences.budget === 'high') {
                    filteredProducts = filteredProducts.filter(p => p.price >= 100);
                }

                // Filter by interests if specified
                if (conversationContext.userPreferences.interests.includes('streaming')) {
                    filteredProducts = filteredProducts.filter(p =>
                        p.title.includes('PRIME') ||
                        p.title.includes('NETFLIX') ||
                        p.title.includes('HOTSTAR')
                    );
                }

                if (conversationContext.userPreferences.interests.includes('vpn')) {
                    filteredProducts = filteredProducts.filter(p =>
                        p.title.includes('SURFSHARK') ||
                        p.title.includes('EXPRESS') ||
                        p.title.includes('NORD')
                    );
                }

                // Sort by relevance
                filteredProducts.sort((a, b) => b.rating - a.rating);

                // Generate response
                if (filteredProducts.length === 0) {
                    return `I couldn't find products matching your criteria. Could you:\n\n` +
                        `• Increase your budget slightly\n` +
                        `• Consider more general categories\n` +
                        `• Or let me know more about what you need?`;
                }

                let response = `Based on your preferences, I recommend:\n\n`;

                // Top 3 recommendations
                filteredProducts.slice(0, 3).forEach(p => {
                    response += `**${p.title}** (₹${p.price}) ★ ${p.rating}/5\n`;
                    response += `▸ ${productDetails[p.id]?.features?.[0] || 'Popular choice'}\n\n`;
                });

                response += `Would you like more details about any of these or see more options?`;

                return response;
            }

            // Enhanced process user input with context tracking
            // Enhanced process user input with context tracking
            function processUserInput() {
                const userInput = aiUserInput.value.trim();
                if (!userInput) return;

                // Add user message to conversation
                addMessage(userInput, true);
                aiUserInput.value = '';

                // Show typing indicator
                const typingIndicator = showTypingIndicator();

                // Simulate AI thinking time
                setTimeout(() => {
                    removeTypingIndicator(typingIndicator);

                    // Get AI response
                    const aiResponse = getAIResponse(userInput);

                    // Add AI response to conversation
                    addMessage(aiResponse, false, true);

                    // Add event listeners to any quick action buttons
                    setTimeout(() => {
                        document.querySelectorAll('.quick-action').forEach(button => {
                            button.addEventListener('click', function () {
                                const action = this.getAttribute('data-action');
                                const product = conversationContext.lastProductMentioned ?
                                    products.find(p => p.id === conversationContext.lastProductMentioned) : null;

                                if (action === 'add-to-cart' && product) {
                                    addToCart(product.id);
                                    addMessage(`Added ${product.title} to your cart!`, false);
                                } else if (action === 'details' && product) {
                                    showProductDetails(product.id);
                                } else if (action === 'compare' && product) {
                                    addMessage(`What would you like to compare ${product.title} with?`, false);
                                }
                            });
                        });
                    }, 100);
                }, 800 + Math.random() * 1200); // More natural response time
            }

            // Send message on button click
            aiSendButton.addEventListener('click', processUserInput);

            // Send message on Enter key
            aiUserInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    processUserInput();
                }
            });

            // Enhanced voice input functionality
            aiVoiceButton.addEventListener('click', function () {
                if ('webkitSpeechRecognition' in window) {
                    const recognition = new webkitSpeechRecognition();
                    recognition.lang = 'en-IN'; // India-specific
                    recognition.interimResults = false;
                    recognition.maxAlternatives = 3;

                    recognition.onstart = function () {
                        aiVoiceButton.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                        aiVoiceButton.style.color = 'var(--accent)';
                        addMessage("🎤 Listening... Please speak now", false);
                    };

                    recognition.onresult = function (event) {
                        const transcript = event.results[0][0].transcript;
                        addMessage(transcript, true);

                        // Show typing indicator
                        const typingIndicator = showTypingIndicator();

                        setTimeout(() => {
                            removeTypingIndicator(typingIndicator);
                            const aiResponse = getAIResponse(transcript);
                            addMessage(aiResponse, false, true);
                        }, 800);
                    };

                    recognition.onerror = function (event) {
                        const errors = {
                            'no-speech': "I didn't hear anything. Please try again.",
                            'audio-capture': "Microphone not available. Please check your device settings.",
                            'not-allowed': "Microphone access denied. Please enable permissions."
                        };
                        addMessage(errors[event.error] || "Sorry, I couldn't understand that. Please try again.", false);
                    };

                    recognition.onend = function () {
                        aiVoiceButton.innerHTML = '<i class="fas fa-microphone"></i>';
                        aiVoiceButton.style.color = '';
                    };

                    recognition.start();
                } else {
                    addMessage("Voice input isn't supported in your browser. Please type your question.", false);
                }
            });

            // Suggestion button clicks with more context
            suggestionButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const suggestion = this.textContent;
                    addMessage(suggestion, true);

                    // Show typing indicator
                    const typingIndicator = showTypingIndicator();

                    setTimeout(() => {
                        removeTypingIndicator(typingIndicator);
                        const aiResponse = getAIResponse(suggestion);
                        addMessage(aiResponse, false, true);
                    }, 800);
                });
            });

            // Initial proactive messages
            const proactiveMessages = [
                "Need help choosing between streaming services? I can compare Netflix, Prime, and Hotstar for you!",
                "🎁 Did you know you can gift subscriptions? Ask me how to send the perfect digital gift.",
                "Our VPN deals are ending soon! Get 20% off Surfshark and ExpressVPN this week."
            ];

            setTimeout(() => {
                if (!aiAssistantModal.classList.contains('active')) {
                    const randomMessage = proactiveMessages[Math.floor(Math.random() * proactiveMessages.length)];
                    addMessage(randomMessage, false);
                }
            }, 30000);

            // Add animations to styles
            const style = document.createElement('style');
            style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            
            @keyframes slideInLeft {
                from { opacity: 0; transform: translateX(-20px); }
                to { opacity: 1; transform: translateX(0); }
            }
            
            @keyframes slideInRight {
                from { opacity: 0; transform: translateX(20px); }
                to { opacity: 1; transform: translateX(0); }
            }
            
            .quick-action {
                background-color: var(--primary);
                color: white;
                border: none;
                border-radius: 4px;
                padding: 5px 10px;
                margin: 5px 5px 5px 0;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 12px;
            }
            .quick-action:hover {
                background-color: var(--accent);
                transform: translateY(-2px);
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            }
            
            strong {
                font-weight: bold;
                color: var(--accent);
            }
            
            em {
                font-style: italic;
            }
        `;
            document.head.appendChild(style);
        });
        // Function to remove typing indicator
        function removeTypingIndicator(indicator) {
            indicator.style.animation = 'fadeOut 0.3s ease forwards';
            setTimeout(() => {
                indicator.remove();
            }, 300);
        }

        // Function to add to cart from AI
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }

            updateCartCount();
            showAlert(`${product.title} added to cart!`);
        }
        // Send message on button click
        aiSendButton.addEventListener('click', processUserInput);

        // Send message on Enter key
        aiUserInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                processUserInput();
            }
        });

        // Voice input functionality
        aiVoiceButton.addEventListener('click', function () {
            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.lang = 'en-IN';
                recognition.interimResults = false;
                recognition.maxAlternatives = 3;

                recognition.onstart = function () {
                    aiVoiceButton.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                    aiVoiceButton.style.color = 'var(--accent)';
                    addMessage("🎤 Listening... Please speak now", false);
                };

                recognition.onresult = function (event) {
                    const transcript = event.results[0][0].transcript;
                    addMessage(transcript, true);

                    // Show typing indicator
                    const typingIndicator = showTypingIndicator();

                    setTimeout(() => {
                        removeTypingIndicator(typingIndicator);
                        const aiResponse = getAIResponse(transcript);
                        addMessage(aiResponse, false, true);
                    }, 800);
                };

                recognition.onerror = function (event) {
                    const errors = {
                        'no-speech': "I didn't hear anything. Please try again.",
                        'audio-capture': "Microphone not available. Please check your device settings.",
                        'not-allowed': "Microphone access denied. Please enable permissions."
                    };
                    addMessage(errors[event.error] || "Sorry, I couldn't understand that. Please try again.", false);
                };

                recognition.onend = function () {
                    aiVoiceButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    aiVoiceButton.style.color = '';
                };

                recognition.start();
            } else {
                addMessage("Voice input isn't supported in your browser. Please type your question.", false);
            }
        });

        // Suggestion button clicks
        document.querySelectorAll('.suggestion-btn').forEach(button => {
            button.addEventListener('click', function () {
                const suggestion = this.textContent;
                addMessage(suggestion, true);

                // Show typing indicator
                const typingIndicator = showTypingIndicator();

                setTimeout(() => {
                    removeTypingIndicator(typingIndicator);
                    const aiResponse = getAIResponse(suggestion);
                    addMessage(aiResponse, false, true);
                }, 800);
            });
        });
        // Debounce scroll/resize events
        function debounce(func, wait = 100) {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    func.apply(this, args);
                }, wait);
            };
        }

        window.addEventListener('resize', debounce(() => {
            // Handle resize
        }));

        // Throttle mousemove events for particles
        function throttle(func, limit = 100) {
            let inThrottle;
            return function () {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }
    </script>
</body>

</html>
